<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schema Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/default.min.css">
    <style>
        .container {
            display: flex;
            flex: 1;
            padding: 20px;
            box-sizing: border-box;
            flex-direction: column;
            /* Change layout to column */
            align-items: center;
            /* Center align all content */
            width: 100%; /* Make container take up the full width */
        }
        .inputs {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .inputs label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #000;
        }

        .inputs input,
        .inputs textarea,
        .inputs select {
            padding: 10px;
            font-size: 14px;
            border: 1px solid #555;
            border-radius: 5px;
            width: 100%;
            box-sizing: border-box;
            background-color: #fff;
            color: #000;
        }

        .inputs input:disabled,
        .inputs textarea:disabled,
        .inputs select:disabled {
            background-color: #e9e9e9;
            color: #a0a0a0;
            border: 1px solid #ccc;
            cursor: not-allowed;
        }

        button {
            padding: 10px 20px;
            font-size: 14px;
            background-color: #ddd;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background-color: #bbb;
        }

        #copyButton {
            background-color: #4CAF50;
            color: white;
        }

        #copyButton:hover {
            background-color: #45a049;
        }

        .input-group {
            display: block;
            margin-bottom: 15px; /* Add spacing between input groups */
        }

        .input-group[style*="display: none"] {
            display: none !important;
        }

        .logo {
            display: block;
            margin: 0 auto 0px;
            max-width: 600px;
        }

        .input-columns {
            display: flex;
            gap: 20px;
            width: 100%; /* Ensure input-columns span the full width */
        }

        .column {
            flex: 1;
        }

        #right-column {
            max-width: 400px;
            min-width: 400px;
        }
        #left-column {
            max-width: 400px;
            min-width: 400px;
        }

        .opening-hours {
            display: flex;
            gap: 10px;
        }

        .day-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .opening-hours-title {
            text-align: center;
            margin-bottom: 10px;
        }

        .opening-hours-container {
            border: 2px solid #ccc;
            padding: 15px;
            /* Reduced padding for better fit */
            border-radius: 10px;
            margin-top: 20px;
            min-height: auto;
            /* Allow height to adjust dynamically */
        }

        .opening-hours {
            display: grid;
            /* Use grid for better alignment */
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            /* Responsive columns */
            gap: 15px;
            /* Add spacing between columns */
            justify-items: center;
            /* Center align items */
        }

        .day-column {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .day-column label {
            font-size: 14px;
            /* Adjust font size for better fit */
        }

        .day-column input {
            width: 100%;
            /* Ensure inputs fit within their container */
            max-width: 100px;
            /* Limit input width */
        }

        .schema-header {
            text-align: center; /* Center align the header and button */
            margin-bottom: 10px;
        }
        #output {
            max-height: 300px;
            overflow-y: auto;
            max-width: 882px;
            width: 882px;
            min-width: 882px;
            display: block;
            box-sizing: border-box;
        }

        pre, code {
            max-width: 882px;
            width: 882px;
            min-width: 882px;
            display: block;
            box-sizing: border-box;
        }
        #copyLabel {
            display: none; /* Initially hidden */
            margin-left: 10px;
            color: green;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="input-columns">
            <div class="column">
                <!-- Inputs and Opening Hours -->
                <div class="inputs">
                    <div class="input-columns">
                        <div class="column">
                            <div class="input-group">
                                <label for="type">Type</label>
                                <select id="type" tabindex="1">
                                    <option value="LocalBusiness" selected>Homepage</option>
                                    <option value="Product">Specialty Page</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="url">URL of Homepage/Specialty Page</label>
                                <input type="text" id="url" placeholder="e.g., https://www.counselingwise.com/" tabindex="3">
                            </div>
                            <div class="input-group">
                                <label for="contactPage">Contact Page</label>
                                <input type="text" id="contactPage" placeholder="e.g., https://www.example.com/contact" tabindex="5">
                            </div>
                            <div class="input-group">
                                <label for="specialtyUrls">Specialty URLs</label>
                                <textarea id="specialtyUrls" placeholder="Separate URLs with a comma" tabindex="7"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="specialtyNames">Specialty Names</label>
                                <textarea id="specialtyNames" placeholder="Separate names with a comma" tabindex="9"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="FAQs">FAQs</label>
                                <textarea id="FAQs" placeholder="Separate questions with a comma" tabindex="11"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="name">Business Name</label>
                                <input type="text" id="name" placeholder="e.g., John Doe Clinic" tabindex="13">
                            </div>
                            <div class="input-group">
                                <label for="streetAddress">Street Address</label>
                                <input type="text" id="streetAddress" placeholder="e.g., 7345 Buckingham Rd" tabindex="15">
                            </div>
                            <div class="input-group">
                                <label for="addressRegion">State</label>
                                <input type="text" id="addressRegion" placeholder="e.g., CO" tabindex="17">
                            </div>
                            <div class="input-group">
                                <label for="lowPrice">Low Price</label>
                                <input type="text" id="lowPrice" placeholder="e.g., 100" value="0" disabled tabindex="19">
                            </div>
                            <div class="input-group">
                                <label for="highPrice">High Price</label>
                                <input type="text" id="highPrice" placeholder="e.g., 500" value="1000" disabled tabindex="20">
                            </div>
                            <div class="input-group">
                                <label for="priceCurrency">Price Currency</label>
                                <input type="text" id="priceCurrency" placeholder="e.g., USD" value="USD" disabled tabindex="23">
                            </div>
                        </div>
                        <div class="column">
                            <div class="input-group">
                                <label for="specialty">Specialty Name</label>
                                <input type="text" id="specialty" placeholder="e.g., Anxiety Therapy" disabled tabindex="2">
                            </div>
                            <div class="input-group">
                                <label for="logoUrl">Logo URL</label>
                                <input type="text" id="logoUrl" placeholder="e.g., https://www.example.com/logo.png" tabindex="4">
                            </div>
                            <div class="input-group">
                                <label for="schedulerPage">Scheduler Page</label>
                                <input type="text" id="schedulerPage" placeholder="e.g., https://www.example.com/schedule" tabindex="6">
                            </div>
                            <div class="input-group">
                                <label for="socialMediaLinks">Social Media URLs</label>
                                <textarea id="socialMediaLinks" placeholder="Separate URLs with a comma" tabindex="8"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="description">Description</label>
                                <textarea id="description" placeholder="A description of the practice or specialty page" tabindex="10"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="answers">Answers</label>
                                <textarea id="answers" placeholder="Separate answers with a comma" tabindex="12"></textarea>
                            </div>
                            <div class="input-group">
                                <label for="telephone">Phone</label>
                                <input type="text" id="telephone" placeholder="e.g., (303) 209-1832" tabindex="14">
                            </div>
                            <div class="input-group">
                                <label for="addressLocality">City</label>
                                <input type="text" id="addressLocality" placeholder="e.g., Boulder" tabindex="16">
                            </div>
                            <div class="input-group">
                                <label for="postalCode">Postal Code</label>
                                <input type="text" id="postalCode" placeholder="e.g., 80301" tabindex="18">
                            </div>
                            <div class="input-group">
                                <label for="latitude">Latitude</label>
                                <input type="text" id="latitude" placeholder="e.g., 40.0682202" tabindex="20">
                            </div>
                            <div class="input-group">
                                <label for="longitude">Longitude</label>
                                <input type="text" id="longitude" placeholder="e.g., -105.1819251" tabindex="22">
                            </div>
                            <div class="input-group">
                                <label for="addressCountry">Country</label>
                                <input type="text" id="addressCountry" placeholder="e.g., USA" value="USA" tabindex="24">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="column">
                <!-- Opening Hours -->
                <div class="input-group opening-hours-container">
                    <h2 class="opening-hours-title">Opening Hours</h2>
                    <div class="opening-hours">
                        <div class="day-column">
                            <label for="mondayOpens">Monday</label>
                            <input type="time" id="mondayOpens" value="09:00"> to
                            <input type="time" id="mondayCloses" value="17:00">
                        </div>
                        <div class="day-column">
                            <label for="tuesdayOpens">Tuesday</label>
                            <input type="time" id="tuesdayOpens" value="09:00"> to
                            <input type="time" id="tuesdayCloses" value="17:00">
                        </div>
                        <div class="day-column">
                            <label for="wednesdayOpens">Wednesday</label>
                            <input type="time" id="wednesdayOpens" value="09:00"> to
                            <input type="time" id="wednesdayCloses" value="17:00">
                        </div>
                        <div class="day-column">
                            <label for="thursdayOpens">Thursday</label>
                            <input type="time" id="thursdayOpens" value="09:00"> to
                            <input type="time" id="thursdayCloses" value="17:00">
                        </div>
                        <div class="day-column">
                            <label for="fridayOpens">Friday</label>
                            <input type="time" id="fridayOpens" value="09:00"> to
                            <input type="time" id="fridayCloses" value="17:00">
                        </div>
                        <div class="day-column">
                            <label for="saturdayOpens">Saturday</label>
                            <input type="time" id="saturdayOpens" value="00:00"> to
                            <input type="time" id="saturdayCloses" value="00:00">
                        </div>
                        <div class="day-column">
                            <label for="sundayOpens">Sunday</label>
                            <input type="time" id="sundayOpens" value="00:00"> to
                            <input type="time" id="sundayCloses" value="00:00">
                        </div>
                    </div>
                </div>
                <!-- Generated Schema -->
                <div class="schema-header">
                    <h1>Generated Schema</h1>
                    <button id="addAddressButton">Add another address</button>
                    <button id="clearAddressesButton">Clear additional addresses</button>
                    <button id="copyButton">Highlight Text</button>
                </div>
                <pre><code id="output" class="json"></code></pre>
                <div id="schema-output">
                    <!-- The generated schema will be inserted here -->
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script>
        // Store additional addresses and coordinates
        let additionalAddresses = [];
        let additionalCoordinates = [];

        // Add another address functionality
        document.getElementById('addAddressButton').addEventListener('click', () => {
            const streetAddress = document.getElementById('streetAddress').value;
            const addressLocality = document.getElementById('addressLocality').value;
            const addressRegion = document.getElementById('addressRegion').value;
            const postalCode = document.getElementById('postalCode').value;
            const addressCountry = document.getElementById('addressCountry').value;
            const latitude = document.getElementById('latitude').value;
            const longitude = document.getElementById('longitude').value;

            // Only add if at least street address is provided
            if (streetAddress.trim()) {
                const address = {
                    "@type": "PostalAddress",
                    ...(streetAddress && { "streetAddress": streetAddress }),
                    ...(addressLocality && { "addressLocality": addressLocality }),
                    ...(addressRegion && { "addressRegion": addressRegion }),
                    ...(postalCode && { "postalCode": postalCode }),
                    ...(addressCountry && { "addressCountry": addressCountry })
                };
                additionalAddresses.push(address);

                // Add coordinates if both latitude and longitude are provided
                if (latitude && longitude) {
                    additionalCoordinates.push({
                        "@type": "GeoCoordinates",
                        "latitude": latitude,
                        "longitude": longitude
                    });
                }

                // Clear the input fields
                document.getElementById('streetAddress').value = '';
                document.getElementById('addressLocality').value = '';
                document.getElementById('addressRegion').value = '';
                document.getElementById('postalCode').value = '';
                document.getElementById('addressCountry').value = 'USA';
                document.getElementById('latitude').value = '';
                document.getElementById('longitude').value = '';

                // Regenerate schema
                generateSchema();
            }
        });

        // Clear additional addresses functionality
        document.getElementById('clearAddressesButton').addEventListener('click', () => {
            additionalAddresses = [];
            additionalCoordinates = [];
            generateSchema();
        });

        async function generateSchema() {
            // Helper function to get input value if not disabled
            const getInputValue = (id) => {
                const element = document.getElementById(id);
                return element.disabled ? undefined : element.value;
            };

            const type = getInputValue('type');
            const isSpecialtyPage = type === 'Product';
            const name = isSpecialtyPage ? getInputValue('specialty') : getInputValue('name');
            const description = getInputValue('description');
            const telephone = getInputValue('telephone');
            const url = getInputValue('url');
            const streetAddress = getInputValue('streetAddress');
            const addressLocality = getInputValue('addressLocality');
            const addressRegion = getInputValue('addressRegion');
            const postalCode = getInputValue('postalCode');
            const addressCountry = getInputValue('addressCountry');
            const priceCurrency = getInputValue('priceCurrency');
            const lowPrice = getInputValue('lowPrice');
            const highPrice = getInputValue('highPrice');
            const logoUrl = getInputValue('logoUrl');
            const socialMediaLinks = getInputValue('socialMediaLinks')?.split(',').map(link => link.trim());
            const contactPage = getInputValue('contactPage');
            const schedulerPage = getInputValue('schedulerPage');
            const specialtyNames = getInputValue('specialtyNames')?.split(',').map(name => name.trim());
            const specialtyUrls = getInputValue('specialtyUrls')?.split(',').map(url => url.trim());
            const faqQuestions = getInputValue('FAQs')?.split(',').map(question => question.trim());
            const faqAnswers = getInputValue('answers')?.split(',').map(answer => answer.trim());

            const hasOfferCatalog = specialtyNames && specialtyUrls ? {
                "@type": "OfferCatalog",
                "name": "Specialties",
                "itemListElement": specialtyNames.map((name, index) => ({
                    "@type": "Offer",
                    "itemOffered": {
                        "@type": "Service",
                        "name": name,
                        "url": specialtyUrls[index] || ""
                    }
                }))
            } : undefined;

            const openingHoursSpecification = [
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Monday",
                    "opens": getInputValue('mondayOpens'),
                    "closes": getInputValue('mondayCloses')
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Tuesday",
                    "opens": getInputValue('tuesdayOpens'),
                    "closes": getInputValue('tuesdayCloses')
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Wednesday",
                    "opens": getInputValue('wednesdayOpens'),
                    "closes": getInputValue('wednesdayCloses')
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Thursday",
                    "opens": getInputValue('thursdayOpens'),
                    "closes": getInputValue('thursdayCloses')
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Friday",
                    "opens": getInputValue('fridayOpens'),
                    "closes": getInputValue('fridayCloses')
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Saturday",
                    "opens": getInputValue('saturdayOpens'),
                    "closes": getInputValue('saturdayCloses')
                },
                {
                    "@type": "OpeningHoursSpecification",
                    "dayOfWeek": "Sunday",
                    "opens": getInputValue('sundayOpens'),
                    "closes": getInputValue('sundayCloses')
                }
            ];

            const address = {
                "@type": "PostalAddress",
                ...(streetAddress && { "streetAddress": streetAddress }),
                ...(addressLocality && { "addressLocality": addressLocality }),
                ...(addressRegion && { "addressRegion": addressRegion }),
                ...(postalCode && { "postalCode": postalCode }),
                ...(addressCountry && { "addressCountry": addressCountry })
            };

            // Combine current address with additional addresses
            const allAddresses = [];
            if (Object.keys(address).length > 1) { // More than just @type
                allAddresses.push(address);
            }
            allAddresses.push(...additionalAddresses);

            // Combine current coordinates with additional coordinates
            const allCoordinates = [];
            if (latitude && longitude) {
                allCoordinates.push({
                    "@type": "GeoCoordinates",
                    "latitude": latitude,
                    "longitude": longitude
                });
            }
            allCoordinates.push(...additionalCoordinates);

            const potentialAction = [
                contactPage && {
                    "@type": "ContactAction",
                    "target": contactPage,
                    "name": "Contact"
                },
                schedulerPage && {
                    "@type": "ReserveAction",
                    "target": schedulerPage,
                    "name": "Make an Appointment"
                }
            ].filter(Boolean);

            const hasFAQ = faqQuestions && faqAnswers && faqQuestions.length > 0 && faqAnswers.length > 0 ? {
                "@type": "FAQPage",
                "mainEntity": faqQuestions.map((question, index) => ({
                    "@type": "Question",
                    "name": question,
                    "acceptedAnswer": {
                        "@type": "Answer",
                        "text": faqAnswers[index] || ""
                    }
                }))
            } : undefined;

            const schema = {
                "@context": "https://schema.org",
                "@type": type,
                ...(name && { "name": name }),
                ...(description && { "description": description }),
                ...(logoUrl && { "image": logoUrl }),
                ...(socialMediaLinks && { "sameAs": socialMediaLinks }),
                ...(telephone && { "telephone": telephone }),
                ...(url && { "url": url }),
                ...(allAddresses.length === 1 && { "address": allAddresses[0] }),
                ...(allAddresses.length > 1 && { "address": allAddresses }),
                ...(allCoordinates.length === 1 && { "geo": allCoordinates[0] }),
                ...(allCoordinates.length > 1 && { "geo": allCoordinates }),
                ...(openingHoursSpecification && { "openingHoursSpecification": openingHoursSpecification })
            };

            if (!isSpecialtyPage) {
                if (potentialAction.length) schema.potentialAction = potentialAction;
                if (hasOfferCatalog) schema.hasOfferCatalog = hasOfferCatalog;
            }

            if (isSpecialtyPage) {
                schema.offers = {
                    "@type": "AggregateOffer",
                    ...(lowPrice && { "lowPrice": lowPrice }),
                    ...(highPrice && { "highPrice": highPrice }),
                    ...(priceCurrency && { "priceCurrency": priceCurrency })
                };

                // Add availableAtOrFrom using business name and addresses
                const availableAtOrFromAddresses = [];
                if (Object.keys(address).length > 1) {
                    availableAtOrFromAddresses.push(address);
                }
                availableAtOrFromAddresses.push(...additionalAddresses);

                if (availableAtOrFromAddresses.length > 0) {
                    if (availableAtOrFromAddresses.length === 1) {
                        schema.availableAtOrFrom = {
                            "@type": "Place",
                            "name": getInputValue('name') || '',
                            "address": availableAtOrFromAddresses[0]
                        };
                    } else {
                        schema.availableAtOrFrom = availableAtOrFromAddresses.map(addr => ({
                            "@type": "Place",
                            "name": getInputValue('name') || '',
                            "address": addr
                        }));
                    }
                }

                // Add FAQ for specialty pages
                if (hasFAQ) schema.hasFAQ = hasFAQ;
            }

            const schemaJson = JSON.stringify(schema, null, 2);
            const schemaHTML = '<script type="application/ld+json">' + schemaJson + '<\/script>';

            // Update the code block
            const output = document.getElementById('output');
            output.textContent = schemaHTML;

            // Apply syntax highlighting
            hljs.highlightElement(output);
        }

        document.querySelectorAll('input, textarea').forEach(element => {
            element.addEventListener('input', generateSchema);
        });

        window.addEventListener('DOMContentLoaded', generateSchema);

        document.getElementById('type').addEventListener('change', () => {
            const isSpecialtyPage = document.getElementById('type').value === 'Product';
            document.getElementById('lowPrice').disabled = !isSpecialtyPage;
            document.getElementById('highPrice').disabled = !isSpecialtyPage;
            document.getElementById('priceCurrency').disabled = !isSpecialtyPage;
            // 'Business Name' should never be disabled
            document.getElementById('name').disabled = false;
            document.getElementById('specialty').disabled = !isSpecialtyPage;
            document.getElementById('logoUrl').disabled = isSpecialtyPage;
            document.getElementById('socialMediaLinks').disabled = isSpecialtyPage;
            document.getElementById('contactPage').disabled = isSpecialtyPage;
            document.getElementById('schedulerPage').disabled = isSpecialtyPage;
            document.getElementById('specialtyNames').disabled = isSpecialtyPage;
            document.getElementById('specialtyUrls').disabled = isSpecialtyPage;
            document.getElementById('FAQs').disabled = !isSpecialtyPage;
            document.getElementById('answers').disabled = !isSpecialtyPage;
            generateSchema();
        });

        window.addEventListener('DOMContentLoaded', () => {
            const event = new Event('change');
            document.getElementById('type').dispatchEvent(event);
        });

        document.getElementById('copyButton').textContent = 'Highlight Text';

        document.getElementById('copyButton').addEventListener('click', () => {
            const output = document.getElementById('output');
            const range = document.createRange();
            range.selectNodeContents(output);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
        });
    </script>
</body>
</html>